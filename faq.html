<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAQ - FocusHub</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="app-header">
        <div class="app-header-content">
            <div class="logo-section">
                <img id="faqLogo" src="FocusHub_vertnorm.svg" alt="FocusHub" class="logo-img" style="height: 60px; width: auto;">
            </div>
            
            <div class="header-controls">
                <a href="dashboard.html" class="btn-home">ðŸ“Š Dashboard</a>
                <a href="app.html" id="faqWorkspaceBtn" class="btn btn-primary">Launch App</a>
            </div>
        </div>
    </header>

    <div class="container" style="padding: 4rem 2rem;">
        <h1 style="text-align: center; font-size: 48px; margin-bottom: 3rem; color: var(--text-primary);">Support</h1>

        <!-- AI Support Agent -->
        <div class="ai-support-section" style="background: var(--bg-secondary); padding: 3rem 2rem; border-radius: 12px; margin-bottom: 4rem;">
            <h2 style="text-align: center; font-size: 32px; margin-bottom: 1rem; color: var(--text-primary);">ðŸ’¬ AI Support Agent</h2>
            <p style="text-align: center; color: var(--text-secondary); margin-bottom: 2rem;">Ask anything about FocusHub - get instant answers.</p>
            
            <div class="chat-container">
                <div id="chatMessages" class="chat-messages"></div>
                
                <div class="chat-input-area">
                    <input 
                        type="text" 
                        id="chatInput" 
                        class="chat-input" 
                        placeholder="Ask a question about FocusHub..."
                        autocomplete="off"
                    >
                    <button id="sendBtn" class="chat-send-btn">Send</button>
                </div>
            </div>
        </div>

        <h2 style="text-align: center; font-size: 32px; margin-bottom: 2rem; color: var(--text-primary);">Frequently Asked Questions</h2>

        <div class="faq-grid">
            <div class="faq-item">
                <div class="faq-question">What makes FocusHub different from other productivity apps?</div>
                <div class="faq-answer">
                    FocusHub doesn't pile on endless to-do lists. It limits your focus to NOW. Energy-based timer. Strategic buckets. Tough-love accountability. Built specifically for ADHD brains that wander but still want to win.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Is this really for ADHD?</div>
                <div class="faq-answer">
                    Yes. Built by someone with ADHD who tried every other system and watched them fail. FocusHub accounts for time blindness, decision fatigue, hyperfocus crashes, and the constant pull of distractions. It's not inspiration. It's scaffolding.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">What's the Tough Love approach?</div>
                <div class="faq-answer">
                    The AI Agent tracks performance and calls out patterns. Not a cheerleader. Not a therapist. A performance coach. If you're logging 8 distractions by noon, it tells you. If you've done 6 sprints with zero output, it asks where the work is. Choose from 3 levels: Supportive, Balanced, or Tough. Accountability, not coddling.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">How does sprint targeting work?</div>
                <div class="faq-answer">
                    You set a baseline (minimum daily sprints). Tasks add to it based on priority: Strategic = 3 sprints, Deep Work = 2 sprints, Urgent = 1 sprint. If your baseline is 5 and you add 2 deep work tasks, your target becomes 9 (5 + 4). This accounts for ADHD reality: tasks take longer than estimated.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Is this free forever?</div>
                <div class="faq-answer">
                    Yes. FocusHub is fully functional forever. No time limits. No feature nagging. No subscription trap. This is a tool, not a business model. Built by someone with ADHD, for people with ADHD.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">What about my data and privacy?</div>
                <div class="faq-answer">
                    Everything lives in your browser's local storage. No cloud sync. No data collection. No tracking. Your tasks, your grades, your distractions are yours alone. Can't be accessed without your device. If you clear browser data, it's gone. That's by design.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">What if I miss a day?</div>
                <div class="faq-answer">
                    Your tasks persist. Your streak resets. No guilt spirals. No shame notifications. Just start fresh. Discipline isn't perfection. It's getting back up. FocusHub doesn't punish gaps; it tracks forward momentum.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">How does the grading system work?</div>
                <div class="faq-answer">
                    At end of day, the system calculates a grade based on (sprints completed / planned sprints) minus a penalty for distractions (5% per distraction). You then grade yourself using buttons (A+, A, A-, B+, B, etc.). Compare the system's grade to yours. Build self-awareness over time.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">What is Intention vs Reality tracking?</div>
                <div class="faq-answer">
                    When logging a distraction, you can check "I'll handle this" to declare your intention to deal with it. The system tracks whether you follow through. Over time, the dashboard shows the gap between what you say you'll do and what you actually do. Builds honest self-assessment without shame.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Can I use this on multiple devices?</div>
                <div class="faq-answer">
                    Currently, data is stored per-browser (localStorage). If you use Chrome on multiple devices with the same account, browser sync may help. For true multi-device sync, you'd need to add a backend (see EXPANSION_GUIDE.md in the documentation).
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Can I export my data?</div>
                <div class="faq-answer">
                    Currently no built-in export (easy to add though). All data is in localStorage as JSON. Open browser DevTools > Application > Local Storage > your domain to see it. Copy/paste to backup. Or ask us to add an export button.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Do I need an internet connection?</div>
                <div class="faq-answer">
                    No! FocusHub works 100% offline after the initial page load. Only external dependency is the confetti animation (CDN), which is purely cosmetic. Everything else runs in your browser.
                </div>
            </div>
        </div>
    </div>

    <footer class="app-footer">
        <a href="app.html">ðŸŽ¯ Workspace</a>
        <span class="footer-separator">|</span>
        <a href="dashboard.html">ðŸ“Š Dashboard</a>
        <span class="footer-separator">|</span>
        <a href="how-to.html">ðŸ“– How-to</a>
    </footer>

    <style>
        .faq-grid {
            display: grid;
            gap: 2rem;
            margin: 4rem 0;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }

        .faq-item {
            background: var(--card-white);
            border: 2px solid var(--border-medium);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: var(--shadow-md);
            transition: all 0.3s;
        }

        .faq-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            border-color: var(--accent-blue);
        }

        .faq-question {
            font-size: 18px;
            font-weight: 700;
            color: var(--accent-blue);
            margin-bottom: 1rem;
            line-height: 1.4;
        }

        .faq-answer {
            color: var(--text-secondary);
            line-height: 1.8;
            font-size: 15px;
        }

        /* AI Support Agent Styles */
        .ai-support-section {
            background: var(--bg-secondary);
            padding: 4rem 0;
            margin-top: 4rem;
        }

        .chat-container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--card-white);
            border: 2px solid var(--border-medium);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .chat-messages {
            height: 400px;
            overflow-y: auto;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .chat-message {
            display: flex;
            gap: 0.75rem;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chat-message.user {
            flex-direction: row-reverse;
        }

        .chat-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .chat-message.user .chat-avatar {
            background: var(--accent-blue);
            color: white;
        }

        .chat-message.assistant .chat-avatar {
            background: var(--accent-green);
            color: white;
        }

        .chat-bubble {
            padding: 0.75rem 1rem;
            border-radius: 12px;
            max-width: 70%;
            line-height: 1.6;
        }

        .chat-message.user .chat-bubble {
            background: var(--accent-blue);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .chat-message.assistant .chat-bubble {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-light);
            border-bottom-left-radius: 4px;
        }

        .chat-input-area {
            display: flex;
            gap: 0.5rem;
            padding: 1rem;
            border-top: 2px solid var(--border-light);
            background: var(--bg-secondary);
        }

        .chat-input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 2px solid var(--border-medium);
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            background: var(--card-white);
            color: var(--text-primary);
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--accent-blue);
        }

        .chat-send-btn {
            padding: 0.75rem 1.5rem;
            background: var(--accent-blue);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .chat-send-btn:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }

        .chat-send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .typing-indicator {
            display: flex;
            gap: 0.25rem;
            padding: 0.75rem 1rem;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--text-muted);
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }
    </style>

    <script>
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');

        // Add initial greeting
        addMessage('assistant', "Hi! I'm the FocusHub support agent. Ask me anything about how FocusHub works, its features, or troubleshooting.");

        function addMessage(role, content) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${role}`;
            
            const avatar = document.createElement('div');
            avatar.className = 'chat-avatar';
            avatar.textContent = role === 'user' ? 'ðŸ‘¤' : 'ðŸ¤–';
            
            const bubble = document.createElement('div');
            bubble.className = 'chat-bubble';
            bubble.textContent = content;
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(bubble);
            chatMessages.appendChild(messageDiv);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'chat-message assistant';
            typingDiv.id = 'typing-indicator';
            
            const avatar = document.createElement('div');
            avatar.className = 'chat-avatar';
            avatar.textContent = 'ðŸ¤–';
            
            const bubble = document.createElement('div');
            bubble.className = 'chat-bubble typing-indicator';
            bubble.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';
            
            typingDiv.appendChild(avatar);
            typingDiv.appendChild(bubble);
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function removeTypingIndicator() {
            const indicator = document.getElementById('typing-indicator');
            if (indicator) indicator.remove();
        }

        async function sendMessage() {
            const message = chatInput.value.trim();
            if (!message) return;
            
            // Add user message
            addMessage('user', message);
            chatInput.value = '';
            
            // Disable input
            sendBtn.disabled = true;
            chatInput.disabled = true;
            
            // Show typing indicator
            showTypingIndicator();
            
            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1000,
                        system: `You are a helpful support agent for FocusHub, a productivity app designed specifically for ADHD brains. 

FocusHub features:
- Sprint-based timer (15/20/30 min based on energy level)
- Task buckets: Holding, Urgent (1 sprint), Deep Work (2 sprints), Strategic (3 sprints)
- Sprint targeting that adds up based on task priorities
- Distraction parking with intention tracking
- Tough Love AI Agent (3 levels: Supportive, Balanced, Tough)
- End-of-day grading system
- Mission Control dashboard with stats
- Intention vs Reality tracking
- 100% local storage (no cloud, no tracking)
- Free forever

Be concise, helpful, and direct. Use a supportive but no-nonsense tone that matches the app's philosophy. Don't sugarcoat or over-explain.`,
                        messages: [
                            { role: 'user', content: message }
                        ]
                    })
                });

                const data = await response.json();
                removeTypingIndicator();
                
                if (data.content && data.content[0]) {
                    addMessage('assistant', data.content[0].text);
                } else {
                    addMessage('assistant', "Sorry, I couldn't process that. Please try again.");
                }
                
            } catch (error) {
                removeTypingIndicator();
                addMessage('assistant', "Sorry, I'm having trouble connecting right now. Please try again later or check the FAQ above.");
                console.error('Chat error:', error);
            }
            
            // Re-enable input
            sendBtn.disabled = false;
            chatInput.disabled = false;
            chatInput.focus();
        }

        sendBtn.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        // Theme detection and logo swap
        function initTheme() {
            const theme = localStorage.getItem('focushub_theme') || 'light';
            const faqLogo = document.getElementById('faqLogo');
            
            if (theme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                if (faqLogo) faqLogo.src = 'FocusHub_vertdark.svg';
            } else {
                document.documentElement.setAttribute('data-theme', 'light');
                if (faqLogo) faqLogo.src = 'FocusHub_vertnorm.svg';
            }
        }

        // Check session state and update button
        function checkSessionState() {
            const sessionState = localStorage.getItem('focushub_session_state');
            const dailyStats = localStorage.getItem('focushub_daily_stats');
            const button = document.getElementById('faqWorkspaceBtn');
            
            if (!button) return;
            
            // If session is active (not ended and has data)
            if (sessionState !== 'ended' && dailyStats) {
                const stats = JSON.parse(dailyStats);
                const today = new Date().toDateString();
                
                // Check if stats are from today
                if (stats.date === today) {
                    button.textContent = 'Return to Workspace';
                }
            }
        }

        initTheme();
        checkSessionState();
    </script>
</body>
</html>
