<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FocusHub - Mission Control</title>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; background: #F8FAFC; min-height: 100vh; }
    .status-bar { background: white; border-bottom: 1px solid #E2E8F0; padding: 0.75rem 2rem; display: flex; justify-content: space-between; align-items: center; }
    .status-left { display: flex; align-items: center; gap: 1rem; }
    .status-logo { height: 24px; }
    .status-app-name { font-size: 14px; font-weight: 700; letter-spacing: 2px; color: #0F172A; font-family: 'Roboto Mono', monospace; }
    .status-right { display: flex; align-items: center; gap: 2rem; }
    .status-indicator { display: flex; align-items: center; gap: 0.5rem; }
    .status-dot { width: 8px; height: 8px; background: #10b981; border-radius: 50%; animation: pulse 2s infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    .status-text { font-size: 11px; font-weight: 700; letter-spacing: 1px; color: #64748B; font-family: 'Roboto Mono', monospace; }
    .status-time { font-size: 11px; color: #94A3B8; font-family: 'Roboto Mono', monospace; }
    .mission-control { max-width: 1400px; margin: 0 auto; padding: 3rem 2rem; }
    .mission-title { font-size: 48px; font-weight: 800; letter-spacing: -1px; color: #0F172A; margin-bottom: 2rem; font-family: 'Roboto Mono', monospace; }
    .bento-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1.5rem; margin-bottom: 2rem; }
    .bento-card { background: white; border: 1px solid #CBD5E1; border-radius: 12px; padding: 1.5rem; position: relative; }
    .activity-flow { grid-column: span 2; grid-row: span 2; }
    .consistency-log { grid-column: span 2; grid-row: span 2; }
    .daily-score { grid-column: span 2; }
    .quick-stats { grid-column: span 2; }
    .card-micro-label { position: absolute; top: 0.75rem; right: 0.75rem; font-size: 9px; font-weight: 700; letter-spacing: 1px; color: #94A3B8; font-family: 'Roboto Mono', monospace; }
    .card-title { font-size: 14px; font-weight: 700; letter-spacing: 0.5px; text-transform: uppercase; color: #475569; margin-bottom: 1.5rem; }
    .chart-area { height: 200px; background: #F8FAFC; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem; }
    .metric-large { font-size: 72px; font-weight: 700; color: #3b82f6; font-family: 'Roboto Mono', monospace; }
    .metric-label { font-size: 12px; color: #64748B; text-transform: uppercase; letter-spacing: 1px; margin-top: 0.5rem; text-align: center; }
    .context-text { font-size: 13px; color: #475569; font-family: 'Roboto Mono', monospace; }
    .stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
    .stat-item { background: #F8FAFC; border-radius: 8px; padding: 1.5rem; text-align: center; }
    .stat-number { font-size: 48px; font-weight: 700; color: #0F172A; font-family: 'Roboto Mono', monospace; }
    .stat-name { font-size: 11px; color: #64748B; text-transform: uppercase; letter-spacing: 1px; margin-top: 0.5rem; }
    .primary-action { width: 100%; background: #0F172A; color: white; border: none; padding: 1.5rem 2rem; font-size: 16px; font-weight: 700; letter-spacing: 2px; text-transform: uppercase; cursor: pointer; font-family: 'Roboto Mono', monospace; display: flex; align-items: center; justify-content: center; gap: 1rem; border-radius: 8px; transition: all 0.2s; }
    .primary-action:hover { background: #1E293B; transform: translateY(-2px); }
    @media (max-width: 1200px) { .bento-grid { grid-template-columns: repeat(2, 1fr); } .activity-flow, .consistency-log { grid-column: span 2; } .daily-score, .quick-stats { grid-column: span 1; } }
  </style>
</head>
<body>
  <div class="status-bar">
    <div class="status-left">
      <img src="/logo.svg" alt="FocusHub" class="status-logo">
      <span class="status-app-name">FOCUSHUB</span>
    </div>
    <div class="status-right">
      <div class="status-indicator">
        <span class="status-dot"></span>
        <span class="status-text">SYSTEM STATUS: ONLINE</span>
      </div>
      <div class="status-time" id="currentTime"></div>
    </div>
  </div>
  <div class="mission-control">
    <h1 class="mission-title">MISSION CONTROL</h1>
    <div class="bento-grid">
      <div class="bento-card activity-flow">
        <div class="card-micro-label">LIVE_TICKER_01</div>
        <h3 class="card-title">Activity Flow</h3>
        <div class="chart-area">
          <div>
            <div class="metric-large" id="totalSprints">0</div>
            <div class="metric-label">Total Sprints</div>
          </div>
        </div>
        <div class="context-text">Total: <span id="sprintsTotal">0</span> (â†‘ Last 7 days)</div>
      </div>
      <div class="bento-card consistency-log">
        <div class="card-micro-label">7_DAY_HIST</div>
        <h3 class="card-title">Consistency Log</h3>
        <div class="chart-area" id="consistencyChart">
          <div class="context-text">No data yet. Start tracking!</div>
        </div>
      </div>
      <div class="bento-card daily-score">
        <div class="card-micro-label">PERF_INDEX</div>
        <h3 class="card-title">Performance Index</h3>
        <div class="chart-area">
          <div>
            <div class="metric-large" id="perfScore">0%</div>
            <div class="metric-label">Avg Grade: <span id="avgGrade">--</span></div>
          </div>
        </div>
        <div class="context-text">Current Streak: <span id="streak" style="color: #10b981; font-weight: 700;">0 days</span></div>
      </div>
      <div class="bento-card quick-stats">
        <div class="card-micro-label">SUMMARY</div>
        <h3 class="card-title">Quick Stats</h3>
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-number" id="totalTasks">0</div>
            <div class="stat-name">Tasks Completed</div>
          </div>
          <div class="stat-item">
            <div class="stat-number" id="daysLogged">0</div>
            <div class="stat-name">Days Logged</div>
          </div>
        </div>
      </div>
    </div>
    <button class="primary-action" onclick="window.location.href='/app'">
      <span>[ > ]</span>
      <span>INITIALIZE NEW SESSION</span>
    </button>
  </div>
  <script>
    function updateTime() { document.getElementById('currentTime').textContent = new Date().toUTCString(); }
    updateTime();
    setInterval(updateTime, 1000);
    function loadStats() {
      const history = JSON.parse(localStorage.getItem('focushub_history') || '[]');
      if (history.length === 0) return;
      const totalSprints = history.reduce((sum, day) => sum + day.sprintCount, 0);
      const totalTasks = history.reduce((sum, day) => sum + day.tasksCompleted, 0);
      const gradeValues = {'A+': 4.3, 'A': 4.0, 'A-': 3.7, 'B+': 3.3, 'B': 3.0, 'B-': 2.7, 'C+': 2.3, 'C': 2.0, 'C-': 1.7, 'D+': 1.3, 'D': 1.0, 'D-': 0.7, 'F': 0.0};
      const avgGradeValue = history.reduce((sum, day) => sum + (gradeValues[day.userGrade || day.autoGrade] || 0), 0) / history.length;
      let streak = 0;
      const gradeThreshold = ['A+', 'A', 'A-', 'B+', 'B'];
      for (let i = history.length - 1; i >= 0; i--) {
        const grade = history[i].userGrade || history[i].autoGrade;
        if (gradeThreshold.includes(grade)) streak++; else break;
      }
      document.getElementById('totalSprints').textContent = totalSprints;
      document.getElementById('sprintsTotal').textContent = totalSprints;
      document.getElementById('totalTasks').textContent = totalTasks;
      document.getElementById('daysLogged').textContent = history.length;
      document.getElementById('perfScore').textContent = Math.round((avgGradeValue / 4.3) * 100) + '%';
      document.getElementById('avgGrade').textContent = avgGradeValue.toFixed(1);
      document.getElementById('streak').textContent = streak + ' days';
    }
    loadStats();
  </script>
</body>
</html>
